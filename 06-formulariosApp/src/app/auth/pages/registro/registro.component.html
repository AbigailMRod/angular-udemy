<h2>Validaciones reactivas</h2>
<hr>

<div class="row">
    <div class="col">

        <form autocomplete="off" 
                [formGroup]="miFormulario"
                (ngSubmit)="submitFormulario()">

        <!-- nombre -->
        <div class="row mb-3">
            <label class="col-sm-3 col-form-label"> Nombre </label>
            <div class="col-sm-9">
                <input type="text" 
                    class="form-control" 
                    formControlName="nombre"
                    placeholder="Nombre del usuario">
            </div>
            <span class="form-text text-danger"
            *ngIf="campoNoValido('nombre')">
                Debe ser en formato de nombre y apellido
            </span>
        </div>

         <!-- email -->
         <div class="row mb-3">
            <label class="col-sm-3 col-form-label"> Email </label>
            <div class="col-sm-9">
                <input type="email" 
                    class="form-control" 
                    placeholder="Email del usuario"
                    formControlName="email">
            </div>
            <span class="form-text text-danger"
            *ngIf="campoNoValido('email')">
                {{emailErrorMsg}}
            </span>
            
        </div>

        <!-- user name -->
        <div class="row mb-3">
            <label class="col-sm-3 col-form-label"> Username </label>
            <div class="col-sm-9">
                <input type="text" 
                    class="form-control" 
                    placeholder="Nombre código del usuario"
                    formControlName="username">
            </div>
            <span class="form-text text-danger"
            *ngIf="campoNoValido('username')">
                El username no puede ser abifq
            </span>
        </div>

        <!-- password -->
        <div class="row mb-3">
            <label class="col-sm-3 col-form-label"> Contraseña </label>
            <div class="col-sm-9">
                <input type="password" 
                    class="form-control" 
                    placeholder="Contraseña de su cuenta"
                    formControlName="password">
            </div>
            <span class="form-text text-danger"
            *ngIf="campoNoValido('password')">
                La contraseña debe ser mayor a 6 caracteres
            </span>
        </div>

        <!-- password2 -->
        <div class="row mb-3">
            <label class="col-sm-3 col-form-label"> Confirmar password </label>
            <div class="col-sm-9">
                <input type="password" 
                    class="form-control" 
                    placeholder="Confirmar la contraseña"
                    formControlName="password2">
            </div>
            <span class="form-text text-danger"
            *ngIf="campoNoValido('password2')">
                Las contraseñas deben coincidir
            </span>
        </div>

        <div class="row">
            <div class="col">
                <button type="submit" 
                        class="btn btn-primary float-end"
                        [disabled]="miFormulario.pending"
                >
                    Crear
                </button>
            </div>
        </div>

        </form>
    </div>
</div>

<h2>Form Valid: {{miFormulario.valid}}</h2>

<h2>Form status: {{miFormulario.status}}  </h2>

<h2> Form errors</h2>
<pre> {{miFormulario.errors | json}} </pre>

<h5>Nombre</h5>
<pre> {{miFormulario.controls.nombre.errors | json}} </pre>

<h5>Email</h5>
<pre> {{miFormulario.controls.email.errors | json}} </pre>

<h5>Username</h5>
<pre> {{miFormulario.controls.username.errors | json}} </pre>

<h5>password</h5>
<pre> {{miFormulario.controls.password.errors | json}} </pre>

<h5>password2</h5>
<pre> {{miFormulario.controls.password2.errors | json}} </pre>